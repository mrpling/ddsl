<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DDSL - Domain Domain-Specific Language</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>DDSL</h1>
      <p class="subtitle">A Domain-Specific Language for Domain Names</p>
      <p class="description">
        A declarative language for describing finite sets of domain names using structural patterns.
        Write an expression, and DDSL expands it into all matching domain names.
      </p>
    </header>

    <main class="editor">
      <div class="input-pane">
        <label for="expression">Expression</label>
        <textarea
          id="expression"
          placeholder="@tlds = {com,net}
example.@tlds"
          spellcheck="false"
        ></textarea>
        <div class="buttons">
          <button id="check-btn" class="btn btn-secondary">Check</button>
          <button id="expand-btn" class="btn btn-primary">Expand All</button>
        </div>
        <div id="error" class="error" hidden></div>
      </div>

      <div class="results-pane">
        <div class="results-header">
          <span id="count">Enter an expression to expand</span>
          <button id="copy-btn" class="btn btn-small" hidden>Copy</button>
        </div>
        <textarea id="results" class="results-textarea" placeholder="Results will appear here"></textarea>
        <div id="line-status" class="line-status"></div>
      </div>
    </main>

    <section class="syntax-help">
      <h2>Syntax Reference</h2>
      <div class="syntax-grid">
        <div class="syntax-item">
          <h3>Literals</h3>
          <p>Plain text: letters, digits, and hyphens</p>
          <code>example</code>
          <code>my-site</code>
        </div>
        <div class="syntax-item">
          <h3>Alternations</h3>
          <p>Choose between two or more options</p>
          <code>{app,api,www}</code>
          <code>{com,net,org}</code>
        </div>
        <div class="syntax-item">
          <h3>Character Classes</h3>
          <p>Ranges with optional repetition</p>
          <code>[a-z]</code>
          <code>[a-z]{3}</code>
          <code>[a-z]{2,4}</code>
        </div>
        <div class="syntax-item">
          <h3>Negated Classes</h3>
          <p>Exclude characters with ^</p>
          <code>[^aeiou]{3}</code>
          <code>[^0-9]{2}</code>
        </div>
        <div class="syntax-item">
          <h3>Named Classes</h3>
          <p>[:v:] vowels, [:c:] consonants</p>
          <code>[[:v:]]</code>
          <code>[[:c:]]{3}</code>
          <code>[[:c:]0-9]{2}</code>
        </div>
        <div class="syntax-item">
          <h3>Grouping</h3>
          <p>Group elements, with optional repetition</p>
          <code>(abc)</code>
          <code>(ab){2,3}</code>
        </div>
        <div class="syntax-item">
          <h3>Optional</h3>
          <p>Make a group or element optional with ?</p>
          <code>car(s)?</code>
          <code>(-v[0-9])?</code>
        </div>
        <div class="syntax-item">
          <h3>Nesting</h3>
          <p>Combine patterns in alternations</p>
          <code>{smart{car,bike},fast}</code>
          <code>{[a-z]{3},foo}</code>
        </div>
        <div class="syntax-item">
          <h3>Variables</h3>
          <p>Define and reuse patterns</p>
          <code>@tlds = {com,net}</code>
          <code>example.@tlds</code>
        </div>
        <div class="syntax-item">
          <h3>Comments</h3>
          <p>Add notes with #</p>
          <code># API domains</code>
          <code>api.com # main</code>
        </div>
      </div>

      <h3>Examples</h3>
      <ul class="examples">
        <li><code>{app,api}.example.com</code> &rarr; app.example.com, api.example.com</li>
        <li><code>car(s)?.com</code> &rarr; car.com, cars.com</li>
        <li><code>[^aeiou]{3}.com</code> &rarr; 29,791 domains (consonants + digits)</li>
        <li><code>[[:c:]][[:v:]][[:c:]].ai</code> &rarr; 2,205 CVC domains</li>
        <li><code>(ab){2,3}.com</code> &rarr; abab.com, ababab.com</li>
      </ul>

      <h3>Multi-line Examples</h3>
      <pre class="example-block">#set prefixes & suffixes
@prefix = {ab,rs,ev,pb}
@suffix = {ai,si}

#set keywords
@keywords = {agent,assistant,studio,lab,stack}

#alternate tlds
@tlds = {com,ai}

#generate
@prefix@keywords.@tlds
@keywords@suffix.@tlds

results &rarr;
abagent.com
abagent.ai
abassistant.com
..
agentai.com
agentai.ai
agentsi.com
</pre>
      <pre class="example-block">@tlds = {com,net,org}
@env = {dev,prod}

# API endpoints
api.@env.example.@tlds

results &rarr;
api.dev.example.com
api.dev.example.net
api.dev.example.org
api.prod.example.com
api.prod.example.net
api.prod.example.org
</pre>
    </section>

    <section class="syntax-help">
      <h2>Links</h2>
      <ul>
        <li><a href="https://github.com/mrpling/ddsl/blob/main/spec.md" target="_blank" rel="noopener">DDSL Specification</a></li>
        <li><a href="https://github.com/mrpling/ddsl" target="_blank" rel="noopener">GitHub</a></li>
        <li><a href="https://rdap.ai" target="_blank" rel="noopener">RDAP AI - Bulk Domain Lookup Tool</a></li>
      </ul>
    </section>
  </div>

  <script src="index.global.js"></script>
  <script src="app.js"></script>
</body>
</html>
